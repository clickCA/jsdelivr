import{i as e,n as t,r as n,t as r}from"./PasswordInput-Dq5YdC3b.js";import{Bt as i,G as a,H as o,It as s,K as c,Kt as l,U as u,Ut as d,W as f,ht as p,pt as m,qt as h}from"./index-Aogkiv19.js";var g=p(),_=h(l(),1);const v=({onSuccess:e}={})=>{let{t:r}=i(),a=d(),[s,c]=(0,_.useState)(!1),[l,u]=(0,_.useState)(null);return(0,_.useEffect)(()=>{t.getToken()&&a(`/`)},[a]),{login:(0,_.useCallback)(async(t,i)=>{c(!0),u(null);try{let s={email:t,password:i},c=await n.login(s);if(c.accessToken)return o.getState().setUser(c.user),e?e():a(`/`),{success:!0};{let e=r(`auth.invalidCredentials`);return console.error(`Login response error:`,c),{success:!1,error:e}}}catch(e){let t=r(`auth.loginFailed`);return e instanceof Error?(t=`${e.message||r(`auth.loginFailed`)} : ${r(`auth.tryAgain`)}`,console.error(`Login error:`,e),u(e)):console.error(`Unexpected error:`,e),{success:!1,error:t}}finally{c(!1)}},[a,e,r]),loading:s,error:l}};var y=h(s(),1);function b(e){let t=(0,g.c)(29),{onSubmit:n,loading:a,error:o}=e,s=a===void 0?!1:a,{t:c}=i(),[l,u]=(0,_.useState)(``),[d,p]=(0,_.useState)(``),h;t[0]!==l||t[1]!==n||t[2]!==d?(h=async e=>{e.preventDefault(),n(l,d)},t[0]=l,t[1]=n,t[2]=d,t[3]=h):h=t[3];let v=h,b;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(b=e=>u(e.target.value),t[4]=b):b=t[4];let x;t[5]===c?x=t[6]:(x=c(`auth.email`),t[5]=c,t[6]=x);let S;t[7]!==l||t[8]!==x?(S=(0,y.jsx)(`div`,{children:(0,y.jsx)(m,{id:`email`,type:`email`,value:l,onChange:b,className:`w-full`,required:!0,placeholder:x})}),t[7]=l,t[8]=x,t[9]=S):S=t[9];let C;t[10]===c?C=t[11]:(C=c(`auth.password`),t[10]=c,t[11]=C);let w;t[12]!==d||t[13]!==C?(w=(0,y.jsx)(r,{value:d,onChange:p,required:!0,placeholder:C}),t[12]=d,t[13]=C,t[14]=w):w=t[14];let T;t[15]!==s||t[16]!==c?(T=c(s?`auth.loggingIn`:`auth.login`),t[15]=s,t[16]=c,t[17]=T):T=t[17];let E;t[18]!==s||t[19]!==T?(E=(0,y.jsx)(f,{type:`submit`,className:`w-full mt-4`,disabled:s,children:T}),t[18]=s,t[19]=T,t[20]=E):E=t[20];let D;t[21]===o?D=t[22]:(D=o&&(0,y.jsx)(`div`,{className:`text-red-500 text-sm mt-2 text-center`,children:o}),t[21]=o,t[22]=D);let O;return t[23]!==v||t[24]!==D||t[25]!==S||t[26]!==w||t[27]!==E?(O=(0,y.jsxs)(`form`,{onSubmit:v,className:`space-y-5`,children:[S,w,E,D]}),t[23]=v,t[24]=D,t[25]=S,t[26]=w,t[27]=E,t[28]=O):O=t[28],O}var x=p();function S(){let t=(0,x.c)(15),{t:n}=i(),{login:r,loading:o,error:s}=v(),l;t[0]===r?l=t[1]:(l=async(e,t)=>{await r(e,t)},t[0]=r,t[1]=l);let d=l,f;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(f={backgroundImage:`url(${e})`},t[2]=f):f=t[2];let p;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,y.jsx)(`img`,{src:u,alt:`Logo`,className:`w-32 h-auto mb-4`}),t[3]=p):p=t[3];let m;t[4]===n?m=t[5]:(m=n(`auth.login`),t[4]=n,t[5]=m);let h;t[6]===m?h=t[7]:(h=(0,y.jsxs)(`div`,{className:`flex flex-col items-center mb-8`,children:[p,(0,y.jsx)(`h1`,{className:`text-2xl font-semibold text-gray-800`,children:m})]}),t[6]=m,t[7]=h);let g=s?.message||void 0,_;t[8]!==d||t[9]!==o||t[10]!==g?(_=(0,y.jsx)(b,{onSubmit:d,loading:o,error:g}),t[8]=d,t[9]=o,t[10]=g,t[11]=_):_=t[11];let S;return t[12]!==h||t[13]!==_?(S=(0,y.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-cover bg-center`,style:f,children:(0,y.jsx)(a,{className:`w-full max-w-md shadow-lg border-0 backdrop-blur-xs`,children:(0,y.jsxs)(c,{className:`p-8`,children:[h,_]})})}),t[12]=h,t[13]=_,t[14]=S):S=t[14],S}export{S as default};