import{t as e}from"./circle-check-big-vOc3UYQ6.js";import{t}from"./file-text-Cr29qHAF.js";import{t as n}from"./layout-grid-DBvj8qEs.js";import{At as r,Bt as i,C as a,M as o,O as s,Pt as c,Q as l,Vt as u,X as d,at as f,it as p,nt as m,tt as h}from"./index---qi5xlK.js";import{t as g}from"./progress-Bsj30uue.js";import{t as _}from"./badge-DdccSipM.js";var v=l(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),y=l(`calendar-clock`,[[`path`,{d:`M16 14v2.2l1.6 1`,key:`fo4ql5`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`path`,{d:`M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5`,key:`1osxxc`}],[`path`,{d:`M3 10h5`,key:`r794hk`}],[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`circle`,{cx:`16`,cy:`16`,r:`6`,key:`qoo3c4`}]]),b=l(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),x=l(`circle-play`,[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),S=l(`circle-question-mark`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3`,key:`1u773s`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),C=l(`info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),w=u(i(),1),T=m(),E=u(r(),1),D=e=>{let t=(0,T.c)(5),{onToggle:n}=e,r;t[0]===n?r=t[1]:(r=e=>{e.preventDefault(),e.stopPropagation(),n()},t[0]=n,t[1]=r);let i;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,E.jsx)(b,{className:`w-6 h-6 text-white`}),t[2]=i):i=t[2];let a;return t[3]===r?a=t[4]:(a=(0,E.jsx)(p,{position:`relative`,width:`64px`,height:`100%`,direction:`column`,align:`center`,className:`bg-white border-r-2 border-[rgb(217,217,217)] z-10 overflow-visible`,children:(0,E.jsx)(o,{onClick:r,size:`icon`,"aria-label":`Expand sidebar`,className:`absolute top-6 -right-4 w-12 h-12 min-w-[48px] min-h-[48px] bg-blue-500 hover:bg-blue-600 rounded-full shadow-md z-10`,children:i})}),t[3]=r,t[4]=a),a},O=m(),k=e=>{let t=(0,O.c)(15),{title:n,progressPercentage:r,t:i}=e,a;t[0]===n?a=t[1]:(a=(0,E.jsx)(`h1`,{className:`text-xl font-medium text-gray-900`,children:n}),t[0]=n,t[1]=a);let o;t[2]===r?o=t[3]:(o=(0,E.jsx)(g,{value:r,className:`h-2 bg-gray-200`}),t[2]=r,t[3]=o);let s;t[4]!==r||t[5]!==i?(s=i(`CourseSidebar.totalProgress`,{value:r}),t[4]=r,t[5]=i,t[6]=s):s=t[6];let c;t[7]===s?c=t[8]:(c=(0,E.jsx)(f,{className:`text-sm text-gray-600 font-medium`,children:s}),t[7]=s,t[8]=c);let l;t[9]!==o||t[10]!==c?(l=(0,E.jsxs)(p,{direction:`column`,gap:`2`,pt:`2`,children:[o,c]}),t[9]=o,t[10]=c,t[11]=l):l=t[11];let u;return t[12]!==a||t[13]!==l?(u=(0,E.jsxs)(f,{px:`5`,pt:`5`,pb:`5`,children:[a,l]}),t[12]=a,t[13]=l,t[14]=u):u=t[14],u};const A=(r,i)=>{if(i)return(0,E.jsx)(e,{className:`w-5 h-5 text-emerald-500`});switch(r){case`info`:return(0,E.jsx)(C,{className:`w-5 h-5 text-brand`});case`video`:return(0,E.jsx)(x,{className:`w-5 h-5 text-brand`});case`quiz`:case`exam`:case`subquiz`:return(0,E.jsx)(S,{className:`w-5 h-5 text-brand`});case`answer`:return(0,E.jsx)(n,{className:`w-5 h-5 text-brand`});case`history`:return(0,E.jsx)(y,{className:`w-5 h-5 text-brand`});default:return(0,E.jsx)(t,{className:`w-5 h-5 text-brand`})}};var j=m(),M=e=>{let t=(0,j.c)(28),{content:n,moduleId:r,isActive:i,isLastItem:o,onClick:s}=e,c=i?`rgb(239, 246, 255)`:void 0,l=i?`4px solid rgb(59, 130, 246)`:void 0,u;t[0]!==c||t[1]!==l?(u={cursor:`pointer`,backgroundColor:c,borderLeft:l},t[0]=c,t[1]=l,t[2]=u):u=t[2];let d;t[3]!==n||t[4]!==r||t[5]!==s?(d=()=>s(r,n),t[3]=n,t[4]=r,t[5]=s,t[6]=d):d=t[6];let m;t[7]!==n.completed||t[8]!==n.type?(m=A(n.type,n.completed),t[7]=n.completed,t[8]=n.type,t[9]=m):m=t[9];let h;t[10]===m?h=t[11]:(h=(0,E.jsx)(f,{mr:`3`,children:m}),t[10]=m,t[11]=h);let g=`text-sm ${n.completed?`text-gray-600`:`text-gray-800`} ${i?`font-medium`:``}`,_;t[12]!==n.title||t[13]!==g?(_=(0,E.jsx)(f,{flexGrow:`1`,children:(0,E.jsx)(f,{className:g,children:n.title})}),t[12]=n.title,t[13]=g,t[14]=_):_=t[14];let v;t[15]===n.duration?v=t[16]:(v=n.duration&&(0,E.jsx)(f,{className:`text-sm text-gray-500`,children:n.duration}),t[15]=n.duration,t[16]=v);let y;t[17]!==u||t[18]!==d||t[19]!==h||t[20]!==_||t[21]!==v?(y=(0,E.jsxs)(p,{align:`center`,px:`5`,py:`3`,style:u,className:`hover:bg-blue-50`,onClick:d,children:[h,_,v]}),t[17]=u,t[18]=d,t[19]=h,t[20]=_,t[21]=v,t[22]=y):y=t[22];let b;t[23]===o?b=t[24]:(b=!o&&(0,E.jsx)(a,{className:`bg-gray-100`}),t[23]=o,t[24]=b);let x;return t[25]!==y||t[26]!==b?(x=(0,E.jsxs)(w.Fragment,{children:[y,b]}),t[25]=y,t[26]=b,t[27]=x):x=t[27],x},N=m(),P=e=>{let t=(0,N.c)(34),{module:n,isExpanded:r,isFirstModule:i,activeContent:a,onToggle:o,onContentClick:s,t:c}=e,l=n.completedContents===n.totalContents,u;t[0]===i?u=t[1]:(u=i?void 0:{borderTop:`1px solid rgb(229, 231, 235)`},t[0]=i,t[1]=u);let m;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(m={cursor:`pointer`},t[2]=m):m=t[2];let h=`module-content-${n.id}`,g;t[3]===n.title?g=t[4]:(g=(0,E.jsx)(`h2`,{className:`font-medium text-gray-800 group-hover:text-blue-600`,children:n.title}),t[3]=n.title,t[4]=g);let v;t[5]===r?v=t[6]:(v=r?(0,E.jsx)(d,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}):(0,E.jsx)(b,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}),t[5]=r,t[6]=v);let y;t[7]!==g||t[8]!==v?(y=(0,E.jsxs)(p,{align:`center`,justify:`between`,children:[g,v]}),t[7]=g,t[8]=v,t[9]=y):y=t[9];let x=l?`text-emerald-600 border-emerald-600 bg-emerald-50`:`text-blue-600 border-blue-600 bg-blue-50`,S;t[10]!==n.completedContents||t[11]!==n.totalContents||t[12]!==c?(S=c(`CourseSidebar.moduleProgress`,{completed:n.completedContents,total:n.totalContents}),t[10]=n.completedContents,t[11]=n.totalContents,t[12]=c,t[13]=S):S=t[13];let C;t[14]!==x||t[15]!==S?(C=(0,E.jsx)(p,{align:`center`,mt:`2`,children:(0,E.jsx)(_,{variant:`outline`,className:x,children:S})}),t[14]=x,t[15]=S,t[16]=C):C=t[16];let w;t[17]!==r||t[18]!==o||t[19]!==h||t[20]!==y||t[21]!==C?(w=(0,E.jsxs)(f,{px:`5`,py:`4`,style:m,className:`group hover:bg-blue-50`,onClick:o,role:`button`,tabIndex:0,"aria-expanded":r,"aria-controls":h,children:[y,C]}),t[17]=r,t[18]=o,t[19]=h,t[20]=y,t[21]=C,t[22]=w):w=t[22];let T;t[23]!==a?.contentId||t[24]!==a?.moduleId||t[25]!==r||t[26]!==n.contents||t[27]!==n.id||t[28]!==s?(T=r&&(0,E.jsx)(f,{style:{borderTop:`1px solid rgb(243, 244, 246)`},id:`module-content-${n.id}`,children:n.contents.map((e,t)=>(0,E.jsx)(M,{content:e,moduleId:n.id,isActive:a?.moduleId===n.id&&a?.contentId===e.id,isLastItem:t===n.contents.length-1,onClick:s},e.id))}),t[23]=a?.contentId,t[24]=a?.moduleId,t[25]=r,t[26]=n.contents,t[27]=n.id,t[28]=s,t[29]=T):T=t[29];let D;return t[30]!==u||t[31]!==w||t[32]!==T?(D=(0,E.jsxs)(f,{style:u,children:[w,T]}),t[30]=u,t[31]=w,t[32]=T,t[33]=D):D=t[33],D},F=m(),I=e=>{let t=(0,F.c)(23),{modules:n,expandedModules:r,activeContent:i,scrollContainerRef:o,onModuleToggle:s,onContentClick:c,onScroll:l,t:u}=e,d;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,E.jsx)(a,{className:`bg-gray-200`}),t[0]=d):d=t[0];let m;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(m={overflow:`hidden`},t[1]=m):m=t[1];let h;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(h={overflowY:`auto`},t[2]=h):h=t[2];let g;if(t[3]!==i||t[4]!==r||t[5]!==n||t[6]!==c||t[7]!==s||t[8]!==u){let e;t[10]!==i||t[11]!==r||t[12]!==c||t[13]!==s||t[14]!==u?(e=(e,t)=>(0,E.jsx)(P,{module:e,isExpanded:r.includes(e.id),isFirstModule:t===0,activeContent:i,onToggle:()=>s(e.id),onContentClick:c,t:u},e.id),t[10]=i,t[11]=r,t[12]=c,t[13]=s,t[14]=u,t[15]=e):e=t[15],g=n.map(e),t[3]=i,t[4]=r,t[5]=n,t[6]=c,t[7]=s,t[8]=u,t[9]=g}else g=t[9];let _;t[16]===g?_=t[17]:(_=(0,E.jsx)(f,{children:g}),t[16]=g,t[17]=_);let v;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,E.jsx)(f,{pt:`40px`}),t[18]=v):v=t[18];let y;return t[19]!==l||t[20]!==o||t[21]!==_?(y=(0,E.jsxs)(E.Fragment,{children:[d,(0,E.jsx)(p,{flexGrow:`1`,style:m,children:(0,E.jsxs)(f,{height:`calc(100vh - 185px)`,width:`100%`,style:h,ref:o,onScroll:l,children:[_,v]})})]}),t[19]=l,t[20]=o,t[21]=_,t[22]=y):y=t[22],y},L=m(),R=e=>{let t=(0,L.c)(9),{isCollapsed:n,onToggle:r,position:i}=e,a=i===void 0?`center`:i,s=n?`Expand sidebar`:`Collapse sidebar`,c=a===`top`?`top-6`:`top-1/2 -translate-y-1/2`,l;t[0]===c?l=t[1]:(l=h(`absolute -right-4`,`w-12 h-12 min-w-[48px] min-h-[48px]`,`bg-blue-500 hover:bg-blue-600`,`rounded-full shadow-md z-10`,c),t[0]=c,t[1]=l);let u;t[2]===n?u=t[3]:(u=n?(0,E.jsx)(b,{className:`w-6 h-6 text-white`}):(0,E.jsx)(v,{className:`w-6 h-6 text-white`}),t[2]=n,t[3]=u);let d;return t[4]!==r||t[5]!==s||t[6]!==l||t[7]!==u?(d=(0,E.jsx)(o,{onClick:r,size:`icon`,"aria-label":s,className:l,children:u}),t[4]=r,t[5]=s,t[6]=l,t[7]=u,t[8]=d):d=t[8],d},z=m(),B=`learnSidebarCollapsed`,V=()=>{try{return localStorage.getItem(B)===`true`}catch{return!1}},H=(0,w.forwardRef)((e,t)=>{let n=(0,z.c)(40),{courseData:r,onContentClick:i}=e,{t:a}=c(`courseSidebar`),{activeContent:o,setActiveContent:l,setCourseData:u}=s(),[d,m]=(0,w.useState)(V),h;n[0]===r.modules?h=n[1]:(h=r.modules.map(W),n[0]=r.modules,n[1]=h);let[g,_]=(0,w.useState)(h),v;n[2]===Symbol.for(`react.memo_cache_sentinel`)?(v={},n[2]=v):v=n[2];let y=(0,w.useRef)(v),b=(0,w.useRef)(null),x=(0,w.useRef)(null),S=(0,w.useRef)(!0),C;n[3]!==o||n[4]!==r||n[5]!==i||n[6]!==l||n[7]!==u?(C=()=>{if(S.current){if(u(r),!o&&r.modules.length>0){let e=r.modules[0],t=e.contents[0];l(e.id,t.id,t.type,t.title,t.referenceId),i?.(e.id,t.id,t.type)}S.current=!1}},n[3]=o,n[4]=r,n[5]=i,n[6]=l,n[7]=u,n[8]=C):C=n[8];let T;n[9]===Symbol.for(`react.memo_cache_sentinel`)?(T=[],n[9]=T):T=n[9],(0,w.useEffect)(C,T);let O,A;n[10]!==r||n[11]!==u?(O=()=>{u(r)},A=[r,u],n[10]=r,n[11]=u,n[12]=O,n[13]=A):(O=n[12],A=n[13]),(0,w.useEffect)(O,A);let j,M;n[14]===o?(j=n[15],M=n[16]):(j=()=>{x.current&&b.current&&(y.current[x.current.moduleId]=b.current.scrollTop),o&&(x.current={moduleId:o.moduleId,contentId:o.contentId},y.current[o.moduleId]!==void 0&&b.current&&setTimeout(()=>{b.current&&(b.current.scrollTop=y.current[o.moduleId])},50))},M=[o],n[14]=o,n[15]=j,n[16]=M),(0,w.useEffect)(j,M);let N;n[17]===Symbol.for(`react.memo_cache_sentinel`)?(N=()=>{m(G)},n[17]=N):N=n[17];let P=N,F;n[18]===Symbol.for(`react.memo_cache_sentinel`)?(F=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},n[18]=F):F=n[18];let L=F,B;n[19]!==o||n[20]!==i||n[21]!==l?(B=(e,t)=>{b.current&&o&&(y.current[o.moduleId]=b.current.scrollTop),l(e,t.id,t.type,t.title,t.referenceId),i?.(e,t.id,t.type)},n[19]=o,n[20]=i,n[21]=l,n[22]=B):B=n[22];let H=B,U;n[23]!==r.modules||n[24]!==H?(U=()=>{let{activeContent:e}=s.getState();if(e)for(let t of r.modules){let n=t.contents.findIndex(t=>t.id===e.contentId);if(n!==-1){if(b.current&&(y.current[t.id]=b.current.scrollTop),n<t.contents.length-1){let e=t.contents[n+1];H(t.id,e);return}let e=r.modules.findIndex(e=>e.id===t.id)+1;if(e<r.modules.length){let t=r.modules[e];t.contents.length>0&&H(t.id,t.contents[0])}}}},n[23]=r.modules,n[24]=H,n[25]=U):U=n[25];let K=U,q;n[26]===K?q=n[27]:(q=()=>({clickNextContent:K}),n[26]=K,n[27]=q),(0,w.useImperativeHandle)(t,q);let J;n[28]===o?J=n[29]:(J=e=>{o&&(y.current[o.moduleId]=e.target.scrollTop)},n[28]=o,n[29]=J);let Y=J,X;return n[30]!==o||n[31]!==r.modules||n[32]!==r.progressPercentage||n[33]!==r.title||n[34]!==g||n[35]!==H||n[36]!==Y||n[37]!==d||n[38]!==a?(X=(0,E.jsx)(f,{className:`overflow-visible shrink-0 h-full transition-all duration-300 ease-in-out`,children:d?(0,E.jsx)(D,{onToggle:P}):(0,E.jsxs)(p,{position:`relative`,width:`100%`,maxWidth:`448px`,height:`100%`,direction:`column`,className:`bg-white border-b border-[rgb(217,217,217)] border-r-2 border-r-[rgb(217,217,217)] z-10 overflow-visible`,children:[(0,E.jsx)(k,{title:r.title,progressPercentage:r.progressPercentage,t:a}),(0,E.jsx)(R,{isCollapsed:d,onToggle:P,position:`top`}),(0,E.jsx)(I,{modules:r.modules,expandedModules:g,activeContent:o,scrollContainerRef:b,onModuleToggle:L,onContentClick:H,onScroll:Y,t:a})]})}),n[30]=o,n[31]=r.modules,n[32]=r.progressPercentage,n[33]=r.title,n[34]=g,n[35]=H,n[36]=Y,n[37]=d,n[38]=a,n[39]=X):X=n[39],X});H.displayName=`Sidebar`;var U=H;function W(e){return e.id}function G(e){let t=!e;try{localStorage.setItem(B,String(t))}catch{}return t}export{U as default};