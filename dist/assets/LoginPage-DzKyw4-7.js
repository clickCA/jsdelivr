import{i as e,n as t,r as n,t as r}from"./PasswordInput-m8wWLaIe.js";import{A as i,Bt as a,F as o,Gt as s,Xt as c,en as l,j as u,k as d,tn as f}from"./index-DVxlyxEz.js";import{n as p,t as m}from"./card-B940mmLx.js";import{t as h}from"./input-Bu4gmI-v.js";var g=o(),_=f(l(),1);const v=({onSuccess:e}={})=>{let{t:r}=s(),i=c(),[a,o]=(0,_.useState)(!1),[l,u]=(0,_.useState)(null);return(0,_.useEffect)(()=>{t.getToken()&&i(`/`)},[i]),{login:(0,_.useCallback)(async(t,a)=>{o(!0),u(null);try{let o={email:t,password:a},s=await n.login(o);if(s.accessToken)return d.getState().setUser(s.user),e?e():i(`/`),{success:!0};{let e=r(`auth.invalidCredentials`);return console.error(`Login response error:`,s),{success:!1,error:e}}}catch(e){let t=r(`auth.loginFailed`);return e instanceof Error?(t=`${e.message||r(`auth.loginFailed`)} : ${r(`auth.tryAgain`)}`,console.error(`Login error:`,e),u(e)):console.error(`Unexpected error:`,e),{success:!1,error:t}}finally{o(!1)}},[i,e,r]),loading:a,error:l}};var y=f(a(),1);function b(e){let t=(0,g.c)(29),{onSubmit:n,loading:i,error:a}=e,o=i===void 0?!1:i,{t:c}=s(),[l,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(``),m;t[0]!==l||t[1]!==n||t[2]!==f?(m=async e=>{e.preventDefault(),n(l,f)},t[0]=l,t[1]=n,t[2]=f,t[3]=m):m=t[3];let v=m,b;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(b=e=>d(e.target.value),t[4]=b):b=t[4];let x;t[5]===c?x=t[6]:(x=c(`auth.email`),t[5]=c,t[6]=x);let S;t[7]!==l||t[8]!==x?(S=(0,y.jsx)(`div`,{children:(0,y.jsx)(h,{id:`email`,type:`email`,value:l,onChange:b,className:`w-full`,required:!0,placeholder:x})}),t[7]=l,t[8]=x,t[9]=S):S=t[9];let C;t[10]===c?C=t[11]:(C=c(`auth.password`),t[10]=c,t[11]=C);let w;t[12]!==f||t[13]!==C?(w=(0,y.jsx)(r,{value:f,onChange:p,required:!0,placeholder:C}),t[12]=f,t[13]=C,t[14]=w):w=t[14];let T;t[15]!==o||t[16]!==c?(T=c(o?`auth.loggingIn`:`auth.login`),t[15]=o,t[16]=c,t[17]=T):T=t[17];let E;t[18]!==o||t[19]!==T?(E=(0,y.jsx)(u,{type:`submit`,className:`w-full mt-4`,disabled:o,children:T}),t[18]=o,t[19]=T,t[20]=E):E=t[20];let D;t[21]===a?D=t[22]:(D=a&&(0,y.jsx)(`div`,{className:`text-red-500 text-sm mt-2 text-center`,children:a}),t[21]=a,t[22]=D);let O;return t[23]!==v||t[24]!==D||t[25]!==S||t[26]!==w||t[27]!==E?(O=(0,y.jsxs)(`form`,{onSubmit:v,className:`space-y-5`,children:[S,w,E,D]}),t[23]=v,t[24]=D,t[25]=S,t[26]=w,t[27]=E,t[28]=O):O=t[28],O}var x=o();function S(){let t=(0,x.c)(15),{t:n}=s(),{login:r,loading:a,error:o}=v(),c;t[0]===r?c=t[1]:(c=async(e,t)=>{await r(e,t)},t[0]=r,t[1]=c);let l=c,u;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(u={backgroundImage:`url(${e})`},t[2]=u):u=t[2];let d;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,y.jsx)(`img`,{src:i,alt:`Logo`,className:`w-32 h-auto mb-4`}),t[3]=d):d=t[3];let f;t[4]===n?f=t[5]:(f=n(`auth.login`),t[4]=n,t[5]=f);let h;t[6]===f?h=t[7]:(h=(0,y.jsxs)(`div`,{className:`flex flex-col items-center mb-8`,children:[d,(0,y.jsx)(`h1`,{className:`text-2xl font-semibold text-gray-800`,children:f})]}),t[6]=f,t[7]=h);let g=o?.message||void 0,_;t[8]!==l||t[9]!==a||t[10]!==g?(_=(0,y.jsx)(b,{onSubmit:l,loading:a,error:g}),t[8]=l,t[9]=a,t[10]=g,t[11]=_):_=t[11];let S;return t[12]!==h||t[13]!==_?(S=(0,y.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-cover bg-center`,style:u,children:(0,y.jsx)(m,{className:`w-full max-w-md shadow-lg border-0 backdrop-blur-xs`,children:(0,y.jsxs)(p,{className:`p-8`,children:[h,_]})})}),t[12]=h,t[13]=_,t[14]=S):S=t[14],S}export{S as default};