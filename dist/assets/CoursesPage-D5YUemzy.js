const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CourseTable-BJfVo0s6.js","assets/index-Aogkiv19.js","assets/index-DW1BYBwS.css","assets/grid-DPAAUkk4.js","assets/heading-BFjozynQ.js"])))=>i.map(i=>d[i]);
import{t as e}from"./grid-DPAAUkk4.js";import{B as t,Gt as n,H as r,It as i,Kt as a,Lt as o,V as s,gt as c,ht as l,qt as u,vt as d,zt as f}from"./index-Aogkiv19.js";var p=l(),m=u(a(),1);const h=f`
  query GetStudentEnrollments($studentId: UUID!) {
    getStudentEnrollments(studentId: $studentId) {
      id
      userId
      course {
        id
        name
        coverImageUrl
        categoryNames
      }
      completionPercentage
      status
      timeSpentSeconds
      startedAt
      lastAccessedAt
      completedAt
      enrollmentDate
      isActive
      createdAt
      updatedAt
    }
  }
`;var g=u(i(),1);const _=()=>{let t=(0,p.c)(4),n;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(n={initial:`3`,md:`6`},t[0]=n):n=t[0];let r;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,g.jsxs)(c,{gap:`3`,align:`center`,children:[(0,g.jsx)(d,{className:`h-10 w-48 bg-gray-200 rounded-md animate-pulse`}),(0,g.jsx)(d,{className:`h-10 w-40 bg-gray-200 rounded-md animate-pulse`}),(0,g.jsx)(d,{className:`h-10 w-32 bg-gray-200 rounded-md animate-pulse`})]}),t[1]=r):r=t[1];let i;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(i={initial:`1`,md:`2`,lg:`3`,xl:`4`},t[2]=i):i=t[2];let a;return t[3]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,g.jsx)(d,{className:`bg-white rounded-lg shadow-lg border border-grey-500 h-full w-full`,children:(0,g.jsx)(d,{p:n,height:`100%`,children:(0,g.jsxs)(c,{direction:`column`,height:`100%`,gap:`4`,children:[r,(0,g.jsx)(d,{className:`flex-1 px-4 py-4`,children:(0,g.jsx)(e,{columns:i,gap:`4`,children:Array.from({length:8}).map(v)})})]})})}),t[3]=a):a=t[3],a};function v(e,t){return(0,g.jsxs)(c,{direction:`column`,gap:`3`,children:[(0,g.jsx)(d,{className:`w-full h-40 bg-gray-200 rounded-lg animate-pulse`}),(0,g.jsx)(d,{className:`h-5 w-3/4 bg-gray-200 rounded animate-pulse`}),(0,g.jsx)(d,{className:`h-4 w-1/2 bg-gray-100 rounded animate-pulse`}),(0,g.jsxs)(c,{align:`center`,gap:`2`,children:[(0,g.jsx)(d,{className:`h-2 flex-1 bg-gray-100 rounded-full animate-pulse`}),(0,g.jsx)(d,{className:`h-4 w-12 bg-gray-200 rounded animate-pulse`})]})]},t)}var y=l(),b=(0,m.lazy)(()=>n(()=>import(`./CourseTable-BJfVo0s6.js`),__vite__mapDeps([0,1,2,3,4])));const x=e=>{let t=(0,y.c)(19),{categoryFilter:n}=e,[i,a]=(0,m.useState)(``),[s,c]=(0,m.useState)(`all`),[l,u]=(0,m.useState)(`all`),{user:d}=r(),f=d?.id,p;t[0]===f?p=t[1]:(p={studentId:f},t[0]=f,t[1]=p);let v=!d?.id,x;t[2]!==p||t[3]!==v?(x={variables:p,skip:v,fetchPolicy:`network-only`},t[2]=p,t[3]=v,t[4]=x):x=t[4];let{loading:C,error:w,data:T}=o(h,x);if(!d?.id){let e;return t[5]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,g.jsx)(`div`,{children:`Please login first`}),t[5]=e):e=t[5],e}if(C){let e;return t[6]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,g.jsx)(`div`,{}),t[6]=e):e=t[6],e}if(w){let e;return t[7]===w.message?e=t[8]:(e=(0,g.jsxs)(`div`,{children:[`Error: `,w.message]}),t[7]=w.message,t[8]=e),e}if(!T||!T.getStudentEnrollments){let e;return t[9]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,g.jsx)(`div`,{children:`ไม่พบข้อมูลการลงทะเบียนเรียน`}),t[9]=e):e=t[9],e}let E;t[10]===T.getStudentEnrollments?E=t[11]:(E=T.getStudentEnrollments.map(S),t[10]=T.getStudentEnrollments,t[11]=E);let D=E,O;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,g.jsx)(_,{}),t[12]=O):O=t[12];let k;return t[13]!==n||t[14]!==l||t[15]!==i||t[16]!==s||t[17]!==D?(k=(0,g.jsx)(m.Suspense,{fallback:O,children:(0,g.jsx)(b,{categoryFilter:n,courses:D,searchQuery:i,selectedCategory:s,completionStatus:l,setSearchQuery:a,setSelectedCategory:c,setCompletionStatus:u})}),t[13]=n,t[14]=l,t[15]=i,t[16]=s,t[17]=D,t[18]=k):k=t[18],k};function S(e){let t=e.course&&e.course.categoryNames?e.course.categoryNames:[];return{enrollmentId:e.id,courseId:e.course?e.course.id:``,title:e.course?e.course.name:``,imageUrl:e.course?e.course.coverImageUrl:``,progressPercentage:Math.ceil(Number(e.completionPercentage))||0,category:t}}var C=l();function w(){let e=(0,C.c)(13),[n,r]=(0,m.useState)(!1),i;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=e=>{r(e)},e[0]=i):i=e[0];let a=i,o;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,g.jsx)(d,{position:`absolute`,inset:`0`,className:`bg-[#FAFAFA] backdrop-blur-md`}),e[1]=o):o=e[1];let l;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,g.jsx)(s,{onPhoneMenuClick:a}),e[2]=l):l=e[2];let u,f;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(u={initial:`column`,md:`row`},f={initial:`1`,xl:`2`},e[3]=u,e[4]=f):(u=e[3],f=e[4]);let p,h;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(p={initial:`0`,md:`2`,xl:`4`},h={initial:`2`,md:`2`,xl:`3`},e[5]=p,e[6]=h):(p=e[5],h=e[6]);let _;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(_=()=>r(!1),e[7]=_):_=e[7];let v;e[8]===n?v=e[9]:(v=(0,g.jsx)(t,{isOpen:n,onClose:_}),e[8]=n,e[9]=v);let y;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,g.jsx)(x,{}),e[10]=y):y=e[10];let b;return e[11]===v?b=e[12]:(b=(0,g.jsxs)(d,{children:[o,(0,g.jsxs)(d,{position:`relative`,children:[l,(0,g.jsxs)(c,{direction:u,gap:f,width:`100vw`,height:`92vh`,px:p,py:h,className:`border-blue-500`,children:[v,y]})]})]}),e[11]=v,e[12]=b),b}export{w as default};