import{n as e,t}from"./progress-AzBMwMFT.js";import{n,t as r}from"./badge-DnH7TGlO.js";import{t as i}from"./circle-check-big-E1Ar4FZV.js";import{t as a}from"./file-text-C_nt4Hpt.js";import{t as o}from"./layout-grid-x-nAMEMe.js";import{Bt as s,F as c,Gt as l,I as u,N as d,O as f,R as p,S as m,T as h,en as g,j as _,tn as v}from"./index-DVxlyxEz.js";var y=f(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),b=f(`calendar-clock`,[[`path`,{d:`M16 14v2.2l1.6 1`,key:`fo4ql5`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`path`,{d:`M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5`,key:`1osxxc`}],[`path`,{d:`M3 10h5`,key:`r794hk`}],[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`circle`,{cx:`16`,cy:`16`,r:`6`,key:`qoo3c4`}]]),x=f(`circle-play`,[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),S=f(`circle-question-mark`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3`,key:`1u773s`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),C=f(`info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),w=v(g(),1),T=c(),E=v(s(),1),D=e=>{let t=(0,T.c)(5),{onToggle:r}=e,i;t[0]===r?i=t[1]:(i=e=>{e.preventDefault(),e.stopPropagation(),r()},t[0]=r,t[1]=i);let a;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,E.jsx)(n,{className:`w-6 h-6 text-white`}),t[2]=a):a=t[2];let o;return t[3]===i?o=t[4]:(o=(0,E.jsx)(u,{position:`relative`,width:`64px`,height:`100%`,direction:`column`,align:`center`,className:`bg-white border-r-2 border-[rgb(217,217,217)] z-10 overflow-visible`,children:(0,E.jsx)(_,{onClick:i,size:`icon`,"aria-label":`Expand sidebar`,className:`absolute top-6 -right-4 w-12 h-12 min-w-[48px] min-h-[48px] bg-blue-500 hover:bg-blue-600 rounded-full shadow-md z-10`,children:a})}),t[3]=i,t[4]=o),o},O=c(),k=e=>{let n=(0,O.c)(15),{title:r,progressPercentage:i,t:a}=e,o;n[0]===r?o=n[1]:(o=(0,E.jsx)(`h1`,{className:`text-xl font-medium text-gray-900`,children:r}),n[0]=r,n[1]=o);let s;n[2]===i?s=n[3]:(s=(0,E.jsx)(t,{value:i,className:`h-2 bg-gray-200`}),n[2]=i,n[3]=s);let c;n[4]!==i||n[5]!==a?(c=a(`CourseSidebar.totalProgress`,{value:i}),n[4]=i,n[5]=a,n[6]=c):c=n[6];let l;n[7]===c?l=n[8]:(l=(0,E.jsx)(p,{className:`text-sm text-gray-600 font-medium`,children:c}),n[7]=c,n[8]=l);let d;n[9]!==s||n[10]!==l?(d=(0,E.jsxs)(u,{direction:`column`,gap:`2`,pt:`2`,children:[s,l]}),n[9]=s,n[10]=l,n[11]=d):d=n[11];let f;return n[12]!==o||n[13]!==d?(f=(0,E.jsxs)(p,{px:`5`,pt:`5`,pb:`5`,children:[o,d]}),n[12]=o,n[13]=d,n[14]=f):f=n[14],f};const A=(e,t)=>{if(t)return(0,E.jsx)(i,{className:`w-5 h-5 text-emerald-500`});switch(e){case`info`:return(0,E.jsx)(C,{className:`w-5 h-5 text-brand`});case`video`:return(0,E.jsx)(x,{className:`w-5 h-5 text-brand`});case`quiz`:case`exam`:case`subquiz`:return(0,E.jsx)(S,{className:`w-5 h-5 text-brand`});case`answer`:return(0,E.jsx)(o,{className:`w-5 h-5 text-brand`});case`history`:return(0,E.jsx)(b,{className:`w-5 h-5 text-brand`});default:return(0,E.jsx)(a,{className:`w-5 h-5 text-brand`})}};var j=c(),M=e=>{let t=(0,j.c)(28),{content:n,moduleId:r,isActive:i,isLastItem:a,onClick:o}=e,s=i?`rgb(239, 246, 255)`:void 0,c=i?`4px solid rgb(59, 130, 246)`:void 0,l;t[0]!==s||t[1]!==c?(l={cursor:`pointer`,backgroundColor:s,borderLeft:c},t[0]=s,t[1]=c,t[2]=l):l=t[2];let d;t[3]!==n||t[4]!==r||t[5]!==o?(d=()=>o(r,n),t[3]=n,t[4]=r,t[5]=o,t[6]=d):d=t[6];let f;t[7]!==n.completed||t[8]!==n.type?(f=A(n.type,n.completed),t[7]=n.completed,t[8]=n.type,t[9]=f):f=t[9];let h;t[10]===f?h=t[11]:(h=(0,E.jsx)(p,{mr:`3`,children:f}),t[10]=f,t[11]=h);let g=`text-sm ${n.completed?`text-gray-600`:`text-gray-800`} ${i?`font-medium`:``}`,_;t[12]!==n.title||t[13]!==g?(_=(0,E.jsx)(p,{flexGrow:`1`,children:(0,E.jsx)(p,{className:g,children:n.title})}),t[12]=n.title,t[13]=g,t[14]=_):_=t[14];let v;t[15]===n.duration?v=t[16]:(v=n.duration&&(0,E.jsx)(p,{className:`text-sm text-gray-500`,children:n.duration}),t[15]=n.duration,t[16]=v);let y;t[17]!==l||t[18]!==d||t[19]!==h||t[20]!==_||t[21]!==v?(y=(0,E.jsxs)(u,{align:`center`,px:`5`,py:`3`,style:l,className:`hover:bg-blue-50`,onClick:d,children:[h,_,v]}),t[17]=l,t[18]=d,t[19]=h,t[20]=_,t[21]=v,t[22]=y):y=t[22];let b;t[23]===a?b=t[24]:(b=!a&&(0,E.jsx)(m,{className:`bg-gray-100`}),t[23]=a,t[24]=b);let x;return t[25]!==y||t[26]!==b?(x=(0,E.jsxs)(w.Fragment,{children:[y,b]}),t[25]=y,t[26]=b,t[27]=x):x=t[27],x},N=c(),P=t=>{let i=(0,N.c)(34),{module:a,isExpanded:o,isFirstModule:s,activeContent:c,onToggle:l,onContentClick:d,t:f}=t,m=a.completedContents===a.totalContents,h;i[0]===s?h=i[1]:(h=s?void 0:{borderTop:`1px solid rgb(229, 231, 235)`},i[0]=s,i[1]=h);let g;i[2]===Symbol.for(`react.memo_cache_sentinel`)?(g={cursor:`pointer`},i[2]=g):g=i[2];let _=`module-content-${a.id}`,v;i[3]===a.title?v=i[4]:(v=(0,E.jsx)(`h2`,{className:`font-medium text-gray-800 group-hover:text-blue-600`,children:a.title}),i[3]=a.title,i[4]=v);let y;i[5]===o?y=i[6]:(y=o?(0,E.jsx)(e,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}):(0,E.jsx)(n,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}),i[5]=o,i[6]=y);let b;i[7]!==v||i[8]!==y?(b=(0,E.jsxs)(u,{align:`center`,justify:`between`,children:[v,y]}),i[7]=v,i[8]=y,i[9]=b):b=i[9];let x=m?`text-emerald-600 border-emerald-600 bg-emerald-50`:`text-blue-600 border-blue-600 bg-blue-50`,S;i[10]!==a.completedContents||i[11]!==a.totalContents||i[12]!==f?(S=f(`CourseSidebar.moduleProgress`,{completed:a.completedContents,total:a.totalContents}),i[10]=a.completedContents,i[11]=a.totalContents,i[12]=f,i[13]=S):S=i[13];let C;i[14]!==x||i[15]!==S?(C=(0,E.jsx)(u,{align:`center`,mt:`2`,children:(0,E.jsx)(r,{variant:`outline`,className:x,children:S})}),i[14]=x,i[15]=S,i[16]=C):C=i[16];let w;i[17]!==o||i[18]!==l||i[19]!==_||i[20]!==b||i[21]!==C?(w=(0,E.jsxs)(p,{px:`5`,py:`4`,style:g,className:`group hover:bg-blue-50`,onClick:l,role:`button`,tabIndex:0,"aria-expanded":o,"aria-controls":_,children:[b,C]}),i[17]=o,i[18]=l,i[19]=_,i[20]=b,i[21]=C,i[22]=w):w=i[22];let T;i[23]!==c?.contentId||i[24]!==c?.moduleId||i[25]!==o||i[26]!==a.contents||i[27]!==a.id||i[28]!==d?(T=o&&(0,E.jsx)(p,{style:{borderTop:`1px solid rgb(243, 244, 246)`},id:`module-content-${a.id}`,children:a.contents.map((e,t)=>(0,E.jsx)(M,{content:e,moduleId:a.id,isActive:c?.moduleId===a.id&&c?.contentId===e.id,isLastItem:t===a.contents.length-1,onClick:d},e.id))}),i[23]=c?.contentId,i[24]=c?.moduleId,i[25]=o,i[26]=a.contents,i[27]=a.id,i[28]=d,i[29]=T):T=i[29];let D;return i[30]!==h||i[31]!==w||i[32]!==T?(D=(0,E.jsxs)(p,{style:h,children:[w,T]}),i[30]=h,i[31]=w,i[32]=T,i[33]=D):D=i[33],D},F=c(),I=e=>{let t=(0,F.c)(23),{modules:n,expandedModules:r,activeContent:i,scrollContainerRef:a,onModuleToggle:o,onContentClick:s,onScroll:c,t:l}=e,d;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,E.jsx)(m,{className:`bg-gray-200`}),t[0]=d):d=t[0];let f;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(f={overflow:`hidden`},t[1]=f):f=t[1];let h;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(h={overflowY:`auto`},t[2]=h):h=t[2];let g;if(t[3]!==i||t[4]!==r||t[5]!==n||t[6]!==s||t[7]!==o||t[8]!==l){let e;t[10]!==i||t[11]!==r||t[12]!==s||t[13]!==o||t[14]!==l?(e=(e,t)=>(0,E.jsx)(P,{module:e,isExpanded:r.includes(e.id),isFirstModule:t===0,activeContent:i,onToggle:()=>o(e.id),onContentClick:s,t:l},e.id),t[10]=i,t[11]=r,t[12]=s,t[13]=o,t[14]=l,t[15]=e):e=t[15],g=n.map(e),t[3]=i,t[4]=r,t[5]=n,t[6]=s,t[7]=o,t[8]=l,t[9]=g}else g=t[9];let _;t[16]===g?_=t[17]:(_=(0,E.jsx)(p,{children:g}),t[16]=g,t[17]=_);let v;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,E.jsx)(p,{pt:`40px`}),t[18]=v):v=t[18];let y;return t[19]!==c||t[20]!==a||t[21]!==_?(y=(0,E.jsxs)(E.Fragment,{children:[d,(0,E.jsx)(u,{flexGrow:`1`,style:f,children:(0,E.jsxs)(p,{height:`calc(100vh - 185px)`,width:`100%`,style:h,ref:a,onScroll:c,children:[_,v]})})]}),t[19]=c,t[20]=a,t[21]=_,t[22]=y):y=t[22],y},L=c(),R=e=>{let t=(0,L.c)(9),{isCollapsed:r,onToggle:i,position:a}=e,o=a===void 0?`center`:a,s=r?`Expand sidebar`:`Collapse sidebar`,c=o===`top`?`top-6`:`top-1/2 -translate-y-1/2`,l;t[0]===c?l=t[1]:(l=d(`absolute -right-4`,`w-12 h-12 min-w-[48px] min-h-[48px]`,`bg-blue-500 hover:bg-blue-600`,`rounded-full shadow-md z-10`,c),t[0]=c,t[1]=l);let u;t[2]===r?u=t[3]:(u=r?(0,E.jsx)(n,{className:`w-6 h-6 text-white`}):(0,E.jsx)(y,{className:`w-6 h-6 text-white`}),t[2]=r,t[3]=u);let f;return t[4]!==i||t[5]!==s||t[6]!==l||t[7]!==u?(f=(0,E.jsx)(_,{onClick:i,size:`icon`,"aria-label":s,className:l,children:u}),t[4]=i,t[5]=s,t[6]=l,t[7]=u,t[8]=f):f=t[8],f},z=c(),B=`learnSidebarCollapsed`,V=()=>{try{return localStorage.getItem(B)===`true`}catch{return!1}},H=(0,w.forwardRef)((e,t)=>{let n=(0,z.c)(40),{courseData:r,onContentClick:i}=e,{t:a}=l(`courseSidebar`),{activeContent:o,setActiveContent:s,setCourseData:c}=h(),[d,f]=(0,w.useState)(V),m;n[0]===r.modules?m=n[1]:(m=r.modules.map(W),n[0]=r.modules,n[1]=m);let[g,_]=(0,w.useState)(m),v;n[2]===Symbol.for(`react.memo_cache_sentinel`)?(v={},n[2]=v):v=n[2];let y=(0,w.useRef)(v),b=(0,w.useRef)(null),x=(0,w.useRef)(null),S=(0,w.useRef)(!0),C;n[3]!==o||n[4]!==r||n[5]!==i||n[6]!==s||n[7]!==c?(C=()=>{if(S.current){if(c(r),!o&&r.modules.length>0){let e=r.modules[0],t=e.contents[0];s(e.id,t.id,t.type,t.title,t.referenceId),i?.(e.id,t.id,t.type)}S.current=!1}},n[3]=o,n[4]=r,n[5]=i,n[6]=s,n[7]=c,n[8]=C):C=n[8];let T;n[9]===Symbol.for(`react.memo_cache_sentinel`)?(T=[],n[9]=T):T=n[9],(0,w.useEffect)(C,T);let O,A;n[10]!==r||n[11]!==c?(O=()=>{c(r)},A=[r,c],n[10]=r,n[11]=c,n[12]=O,n[13]=A):(O=n[12],A=n[13]),(0,w.useEffect)(O,A);let j,M;n[14]===o?(j=n[15],M=n[16]):(j=()=>{x.current&&b.current&&(y.current[x.current.moduleId]=b.current.scrollTop),o&&(x.current={moduleId:o.moduleId,contentId:o.contentId},y.current[o.moduleId]!==void 0&&b.current&&setTimeout(()=>{b.current&&(b.current.scrollTop=y.current[o.moduleId])},50))},M=[o],n[14]=o,n[15]=j,n[16]=M),(0,w.useEffect)(j,M);let N;n[17]===Symbol.for(`react.memo_cache_sentinel`)?(N=()=>{f(G)},n[17]=N):N=n[17];let P=N,F;n[18]===Symbol.for(`react.memo_cache_sentinel`)?(F=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},n[18]=F):F=n[18];let L=F,B;n[19]!==o||n[20]!==i||n[21]!==s?(B=(e,t)=>{b.current&&o&&(y.current[o.moduleId]=b.current.scrollTop),s(e,t.id,t.type,t.title,t.referenceId),i?.(e,t.id,t.type)},n[19]=o,n[20]=i,n[21]=s,n[22]=B):B=n[22];let H=B,U;n[23]!==r.modules||n[24]!==H?(U=()=>{let{activeContent:e}=h.getState();if(e)for(let t of r.modules){let n=t.contents.findIndex(t=>t.id===e.contentId);if(n!==-1){if(b.current&&(y.current[t.id]=b.current.scrollTop),n<t.contents.length-1){let e=t.contents[n+1];H(t.id,e);return}let e=r.modules.findIndex(e=>e.id===t.id)+1;if(e<r.modules.length){let t=r.modules[e];t.contents.length>0&&H(t.id,t.contents[0])}}}},n[23]=r.modules,n[24]=H,n[25]=U):U=n[25];let K=U,q;n[26]===K?q=n[27]:(q=()=>({clickNextContent:K}),n[26]=K,n[27]=q),(0,w.useImperativeHandle)(t,q);let J;n[28]===o?J=n[29]:(J=e=>{o&&(y.current[o.moduleId]=e.target.scrollTop)},n[28]=o,n[29]=J);let Y=J,X;return n[30]!==o||n[31]!==r.modules||n[32]!==r.progressPercentage||n[33]!==r.title||n[34]!==g||n[35]!==H||n[36]!==Y||n[37]!==d||n[38]!==a?(X=(0,E.jsx)(p,{className:`overflow-visible shrink-0 h-full transition-all duration-300 ease-in-out`,children:d?(0,E.jsx)(D,{onToggle:P}):(0,E.jsxs)(u,{position:`relative`,width:`100%`,maxWidth:`448px`,height:`100%`,direction:`column`,className:`bg-white border-b border-[rgb(217,217,217)] border-r-2 border-r-[rgb(217,217,217)] z-10 overflow-visible`,children:[(0,E.jsx)(k,{title:r.title,progressPercentage:r.progressPercentage,t:a}),(0,E.jsx)(R,{isCollapsed:d,onToggle:P,position:`top`}),(0,E.jsx)(I,{modules:r.modules,expandedModules:g,activeContent:o,scrollContainerRef:b,onModuleToggle:L,onContentClick:H,onScroll:Y,t:a})]})}),n[30]=o,n[31]=r.modules,n[32]=r.progressPercentage,n[33]=r.title,n[34]=g,n[35]=H,n[36]=Y,n[37]=d,n[38]=a,n[39]=X):X=n[39],X});H.displayName=`Sidebar`;var U=H;function W(e){return e.id}function G(e){let t=!e;try{localStorage.setItem(B,String(t))}catch{}return t}export{U as default};