import{t as e}from"./circle-check-big-B4DEZQ_a.js";import{t}from"./file-text-DaHZwf-G.js";import{Bt as n,D as r,F as i,It as a,Kt as o,O as s,T as c,W as l,at as u,ct as d,dt as f,gt as p,ht as m,lt as h,mt as g,qt as _,vt as v}from"./index-Aogkiv19.js";var y=f(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),b=f(`calendar-clock`,[[`path`,{d:`M16 14v2.2l1.6 1`,key:`fo4ql5`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`path`,{d:`M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5`,key:`1osxxc`}],[`path`,{d:`M3 10h5`,key:`r794hk`}],[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`circle`,{cx:`16`,cy:`16`,r:`6`,key:`qoo3c4`}]]),x=f(`circle-play`,[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),S=f(`circle-question-mark`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3`,key:`1u773s`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),C=f(`info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),w=_(o(),1),T=m(),E=_(a(),1),D=e=>{let t=(0,T.c)(5),{onToggle:n}=e,r;t[0]===n?r=t[1]:(r=e=>{e.preventDefault(),e.stopPropagation(),n()},t[0]=n,t[1]=r);let i;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,E.jsx)(d,{className:`w-6 h-6 text-white`}),t[2]=i):i=t[2];let a;return t[3]===r?a=t[4]:(a=(0,E.jsx)(p,{position:`relative`,width:`64px`,height:`100%`,direction:`column`,align:`center`,className:`bg-white border-r-2 border-[rgb(217,217,217)] z-10 overflow-visible`,children:(0,E.jsx)(l,{onClick:r,size:`icon`,"aria-label":`Expand sidebar`,className:`absolute top-6 -right-4 w-12 h-12 min-w-[48px] min-h-[48px] bg-blue-500 hover:bg-blue-600 rounded-full shadow-md z-10`,children:i})}),t[3]=r,t[4]=a),a},O=m(),k=e=>{let t=(0,O.c)(15),{title:n,progressPercentage:r,t:i}=e,a;t[0]===n?a=t[1]:(a=(0,E.jsx)(`h1`,{className:`text-xl font-medium text-gray-900`,children:n}),t[0]=n,t[1]=a);let o;t[2]===r?o=t[3]:(o=(0,E.jsx)(s,{value:r,className:`h-2 bg-gray-200`}),t[2]=r,t[3]=o);let c;t[4]!==r||t[5]!==i?(c=i(`CourseSidebar.totalProgress`,{value:r}),t[4]=r,t[5]=i,t[6]=c):c=t[6];let l;t[7]===c?l=t[8]:(l=(0,E.jsx)(v,{className:`text-sm text-gray-600 font-medium`,children:c}),t[7]=c,t[8]=l);let u;t[9]!==o||t[10]!==l?(u=(0,E.jsxs)(p,{direction:`column`,gap:`2`,pt:`2`,children:[o,l]}),t[9]=o,t[10]=l,t[11]=u):u=t[11];let d;return t[12]!==a||t[13]!==u?(d=(0,E.jsxs)(v,{px:`5`,pt:`5`,pb:`5`,children:[a,u]}),t[12]=a,t[13]=u,t[14]=d):d=t[14],d};const A=(n,r)=>{if(r)return(0,E.jsx)(e,{className:`w-5 h-5 text-emerald-500`});switch(n){case`info`:return(0,E.jsx)(C,{className:`w-5 h-5 text-brand`});case`video`:return(0,E.jsx)(x,{className:`w-5 h-5 text-brand`});case`quiz`:case`exam`:case`subquiz`:return(0,E.jsx)(S,{className:`w-5 h-5 text-brand`});case`answer`:return(0,E.jsx)(u,{className:`w-5 h-5 text-brand`});case`history`:return(0,E.jsx)(b,{className:`w-5 h-5 text-brand`});default:return(0,E.jsx)(t,{className:`w-5 h-5 text-brand`})}};var j=m(),M=e=>{let t=(0,j.c)(28),{content:n,moduleId:i,isActive:a,isLastItem:o,onClick:s}=e,c=a?`rgb(239, 246, 255)`:void 0,l=a?`4px solid rgb(59, 130, 246)`:void 0,u;t[0]!==c||t[1]!==l?(u={cursor:`pointer`,backgroundColor:c,borderLeft:l},t[0]=c,t[1]=l,t[2]=u):u=t[2];let d;t[3]!==n||t[4]!==i||t[5]!==s?(d=()=>s(i,n),t[3]=n,t[4]=i,t[5]=s,t[6]=d):d=t[6];let f;t[7]!==n.completed||t[8]!==n.type?(f=A(n.type,n.completed),t[7]=n.completed,t[8]=n.type,t[9]=f):f=t[9];let m;t[10]===f?m=t[11]:(m=(0,E.jsx)(v,{mr:`3`,children:f}),t[10]=f,t[11]=m);let h=`text-sm ${n.completed?`text-gray-600`:`text-gray-800`} ${a?`font-medium`:``}`,g;t[12]!==n.title||t[13]!==h?(g=(0,E.jsx)(v,{flexGrow:`1`,children:(0,E.jsx)(v,{className:h,children:n.title})}),t[12]=n.title,t[13]=h,t[14]=g):g=t[14];let _;t[15]===n.duration?_=t[16]:(_=n.duration&&(0,E.jsx)(v,{className:`text-sm text-gray-500`,children:n.duration}),t[15]=n.duration,t[16]=_);let y;t[17]!==u||t[18]!==d||t[19]!==m||t[20]!==g||t[21]!==_?(y=(0,E.jsxs)(p,{align:`center`,px:`5`,py:`3`,style:u,className:`hover:bg-blue-50`,onClick:d,children:[m,g,_]}),t[17]=u,t[18]=d,t[19]=m,t[20]=g,t[21]=_,t[22]=y):y=t[22];let b;t[23]===o?b=t[24]:(b=!o&&(0,E.jsx)(r,{className:`bg-gray-100`}),t[23]=o,t[24]=b);let x;return t[25]!==y||t[26]!==b?(x=(0,E.jsxs)(w.Fragment,{children:[y,b]}),t[25]=y,t[26]=b,t[27]=x):x=t[27],x},N=m(),P=e=>{let t=(0,N.c)(34),{module:n,isExpanded:r,isFirstModule:a,activeContent:o,onToggle:s,onContentClick:c,t:l}=e,u=n.completedContents===n.totalContents,f;t[0]===a?f=t[1]:(f=a?void 0:{borderTop:`1px solid rgb(229, 231, 235)`},t[0]=a,t[1]=f);let m;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(m={cursor:`pointer`},t[2]=m):m=t[2];let g=`module-content-${n.id}`,_;t[3]===n.title?_=t[4]:(_=(0,E.jsx)(`h2`,{className:`font-medium text-gray-800 group-hover:text-blue-600`,children:n.title}),t[3]=n.title,t[4]=_);let y;t[5]===r?y=t[6]:(y=r?(0,E.jsx)(h,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}):(0,E.jsx)(d,{className:`w-5 h-5 text-gray-500 group-hover:text-blue-600`}),t[5]=r,t[6]=y);let b;t[7]!==_||t[8]!==y?(b=(0,E.jsxs)(p,{align:`center`,justify:`between`,children:[_,y]}),t[7]=_,t[8]=y,t[9]=b):b=t[9];let x=u?`text-emerald-600 border-emerald-600 bg-emerald-50`:`text-blue-600 border-blue-600 bg-blue-50`,S;t[10]!==n.completedContents||t[11]!==n.totalContents||t[12]!==l?(S=l(`CourseSidebar.moduleProgress`,{completed:n.completedContents,total:n.totalContents}),t[10]=n.completedContents,t[11]=n.totalContents,t[12]=l,t[13]=S):S=t[13];let C;t[14]!==x||t[15]!==S?(C=(0,E.jsx)(p,{align:`center`,mt:`2`,children:(0,E.jsx)(i,{variant:`outline`,className:x,children:S})}),t[14]=x,t[15]=S,t[16]=C):C=t[16];let w;t[17]!==r||t[18]!==s||t[19]!==g||t[20]!==b||t[21]!==C?(w=(0,E.jsxs)(v,{px:`5`,py:`4`,style:m,className:`group hover:bg-blue-50`,onClick:s,role:`button`,tabIndex:0,"aria-expanded":r,"aria-controls":g,children:[b,C]}),t[17]=r,t[18]=s,t[19]=g,t[20]=b,t[21]=C,t[22]=w):w=t[22];let T;t[23]!==o?.contentId||t[24]!==o?.moduleId||t[25]!==r||t[26]!==n.contents||t[27]!==n.id||t[28]!==c?(T=r&&(0,E.jsx)(v,{style:{borderTop:`1px solid rgb(243, 244, 246)`},id:`module-content-${n.id}`,children:n.contents.map((e,t)=>(0,E.jsx)(M,{content:e,moduleId:n.id,isActive:o?.moduleId===n.id&&o?.contentId===e.id,isLastItem:t===n.contents.length-1,onClick:c},e.id))}),t[23]=o?.contentId,t[24]=o?.moduleId,t[25]=r,t[26]=n.contents,t[27]=n.id,t[28]=c,t[29]=T):T=t[29];let D;return t[30]!==f||t[31]!==w||t[32]!==T?(D=(0,E.jsxs)(v,{style:f,children:[w,T]}),t[30]=f,t[31]=w,t[32]=T,t[33]=D):D=t[33],D},F=m(),I=e=>{let t=(0,F.c)(23),{modules:n,expandedModules:i,activeContent:a,scrollContainerRef:o,onModuleToggle:s,onContentClick:c,onScroll:l,t:u}=e,d;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,E.jsx)(r,{className:`bg-gray-200`}),t[0]=d):d=t[0];let f;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(f={overflow:`hidden`},t[1]=f):f=t[1];let m;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(m={overflowY:`auto`},t[2]=m):m=t[2];let h;if(t[3]!==a||t[4]!==i||t[5]!==n||t[6]!==c||t[7]!==s||t[8]!==u){let e;t[10]!==a||t[11]!==i||t[12]!==c||t[13]!==s||t[14]!==u?(e=(e,t)=>(0,E.jsx)(P,{module:e,isExpanded:i.includes(e.id),isFirstModule:t===0,activeContent:a,onToggle:()=>s(e.id),onContentClick:c,t:u},e.id),t[10]=a,t[11]=i,t[12]=c,t[13]=s,t[14]=u,t[15]=e):e=t[15],h=n.map(e),t[3]=a,t[4]=i,t[5]=n,t[6]=c,t[7]=s,t[8]=u,t[9]=h}else h=t[9];let g;t[16]===h?g=t[17]:(g=(0,E.jsx)(v,{children:h}),t[16]=h,t[17]=g);let _;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,E.jsx)(v,{pt:`40px`}),t[18]=_):_=t[18];let y;return t[19]!==l||t[20]!==o||t[21]!==g?(y=(0,E.jsxs)(E.Fragment,{children:[d,(0,E.jsx)(p,{flexGrow:`1`,style:f,children:(0,E.jsxs)(v,{height:`calc(100vh - 185px)`,width:`100%`,style:m,ref:o,onScroll:l,children:[g,_]})})]}),t[19]=l,t[20]=o,t[21]=g,t[22]=y):y=t[22],y},L=m(),R=e=>{let t=(0,L.c)(9),{isCollapsed:n,onToggle:r,position:i}=e,a=i===void 0?`center`:i,o=n?`Expand sidebar`:`Collapse sidebar`,s=a===`top`?`top-6`:`top-1/2 -translate-y-1/2`,c;t[0]===s?c=t[1]:(c=g(`absolute -right-4`,`w-12 h-12 min-w-[48px] min-h-[48px]`,`bg-blue-500 hover:bg-blue-600`,`rounded-full shadow-md z-10`,s),t[0]=s,t[1]=c);let u;t[2]===n?u=t[3]:(u=n?(0,E.jsx)(d,{className:`w-6 h-6 text-white`}):(0,E.jsx)(y,{className:`w-6 h-6 text-white`}),t[2]=n,t[3]=u);let f;return t[4]!==r||t[5]!==o||t[6]!==c||t[7]!==u?(f=(0,E.jsx)(l,{onClick:r,size:`icon`,"aria-label":o,className:c,children:u}),t[4]=r,t[5]=o,t[6]=c,t[7]=u,t[8]=f):f=t[8],f},z=m(),B=`learnSidebarCollapsed`,V=()=>{try{return localStorage.getItem(B)===`true`}catch{return!1}},H=(0,w.forwardRef)((e,t)=>{let r=(0,z.c)(40),{courseData:i,onContentClick:a}=e,{t:o}=n(`courseSidebar`),{activeContent:s,setActiveContent:l,setCourseData:u}=c(),[d,f]=(0,w.useState)(V),m;r[0]===i.modules?m=r[1]:(m=i.modules.map(W),r[0]=i.modules,r[1]=m);let[h,g]=(0,w.useState)(m),_;r[2]===Symbol.for(`react.memo_cache_sentinel`)?(_={},r[2]=_):_=r[2];let y=(0,w.useRef)(_),b=(0,w.useRef)(null),x=(0,w.useRef)(null),S=(0,w.useRef)(!0),C;r[3]!==s||r[4]!==i||r[5]!==a||r[6]!==l||r[7]!==u?(C=()=>{if(S.current){if(u(i),!s&&i.modules.length>0){let e=i.modules[0],t=e.contents[0];l(e.id,t.id,t.type,t.title,t.referenceId),a?.(e.id,t.id,t.type)}S.current=!1}},r[3]=s,r[4]=i,r[5]=a,r[6]=l,r[7]=u,r[8]=C):C=r[8];let T;r[9]===Symbol.for(`react.memo_cache_sentinel`)?(T=[],r[9]=T):T=r[9],(0,w.useEffect)(C,T);let O,A;r[10]!==i||r[11]!==u?(O=()=>{u(i)},A=[i,u],r[10]=i,r[11]=u,r[12]=O,r[13]=A):(O=r[12],A=r[13]),(0,w.useEffect)(O,A);let j,M;r[14]===s?(j=r[15],M=r[16]):(j=()=>{x.current&&b.current&&(y.current[x.current.moduleId]=b.current.scrollTop),s&&(x.current={moduleId:s.moduleId,contentId:s.contentId},y.current[s.moduleId]!==void 0&&b.current&&setTimeout(()=>{b.current&&(b.current.scrollTop=y.current[s.moduleId])},50))},M=[s],r[14]=s,r[15]=j,r[16]=M),(0,w.useEffect)(j,M);let N;r[17]===Symbol.for(`react.memo_cache_sentinel`)?(N=()=>{f(G)},r[17]=N):N=r[17];let P=N,F;r[18]===Symbol.for(`react.memo_cache_sentinel`)?(F=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},r[18]=F):F=r[18];let L=F,B;r[19]!==s||r[20]!==a||r[21]!==l?(B=(e,t)=>{b.current&&s&&(y.current[s.moduleId]=b.current.scrollTop),l(e,t.id,t.type,t.title,t.referenceId),a?.(e,t.id,t.type)},r[19]=s,r[20]=a,r[21]=l,r[22]=B):B=r[22];let H=B,U;r[23]!==i.modules||r[24]!==H?(U=()=>{let{activeContent:e}=c.getState();if(e)for(let t of i.modules){let n=t.contents.findIndex(t=>t.id===e.contentId);if(n!==-1){if(b.current&&(y.current[t.id]=b.current.scrollTop),n<t.contents.length-1){let e=t.contents[n+1];H(t.id,e);return}let e=i.modules.findIndex(e=>e.id===t.id)+1;if(e<i.modules.length){let t=i.modules[e];t.contents.length>0&&H(t.id,t.contents[0])}}}},r[23]=i.modules,r[24]=H,r[25]=U):U=r[25];let K=U,q;r[26]===K?q=r[27]:(q=()=>({clickNextContent:K}),r[26]=K,r[27]=q),(0,w.useImperativeHandle)(t,q);let J;r[28]===s?J=r[29]:(J=e=>{s&&(y.current[s.moduleId]=e.target.scrollTop)},r[28]=s,r[29]=J);let Y=J,X;return r[30]!==s||r[31]!==i.modules||r[32]!==i.progressPercentage||r[33]!==i.title||r[34]!==h||r[35]!==H||r[36]!==Y||r[37]!==d||r[38]!==o?(X=(0,E.jsx)(v,{className:`overflow-visible shrink-0 h-full transition-all duration-300 ease-in-out`,children:d?(0,E.jsx)(D,{onToggle:P}):(0,E.jsxs)(p,{position:`relative`,width:`100%`,maxWidth:`448px`,height:`100%`,direction:`column`,className:`bg-white border-b border-[rgb(217,217,217)] border-r-2 border-r-[rgb(217,217,217)] z-10 overflow-visible`,children:[(0,E.jsx)(k,{title:i.title,progressPercentage:i.progressPercentage,t:o}),(0,E.jsx)(R,{isCollapsed:d,onToggle:P,position:`top`}),(0,E.jsx)(I,{modules:i.modules,expandedModules:h,activeContent:s,scrollContainerRef:b,onModuleToggle:L,onContentClick:H,onScroll:Y,t:o})]})}),r[30]=s,r[31]=i.modules,r[32]=i.progressPercentage,r[33]=i.title,r[34]=h,r[35]=H,r[36]=Y,r[37]=d,r[38]=o,r[39]=X):X=r[39],X});H.displayName=`Sidebar`;var U=H;function W(e){return e.id}function G(e){let t=!e;try{localStorage.setItem(B,String(t))}catch{}return t}export{U as default};