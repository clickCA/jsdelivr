import{i as e,n as t,r as n,t as r}from"./PasswordInput-u5vDmW8l.js";import{At as i,Bt as a,F as o,I as s,L as c,M as l,Pt as u,Rt as d,Vt as f,et as p,j as m,nt as h}from"./index-BBzmVm7X.js";var g=h(),_=f(a(),1);const v=({onSuccess:e}={})=>{let{t:r}=u(),i=d(),[a,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(null);return(0,_.useEffect)(()=>{t.getToken()&&i(`/`)},[i]),{login:(0,_.useCallback)(async(t,a)=>{s(!0),l(null);try{let s={email:t,password:a},c=await n.login(s);if(c.accessToken)return o.getState().setUser(c.user),e?e():i(`/`),{success:!0};{let e=r(`auth.invalidCredentials`);return console.error(`Login response error:`,c),{success:!1,error:e}}}catch(e){let t=r(`auth.loginFailed`);return e instanceof Error?(t=`${e.message||r(`auth.loginFailed`)} : ${r(`auth.tryAgain`)}`,console.error(`Login error:`,e),l(e)):console.error(`Unexpected error:`,e),{success:!1,error:t}}finally{s(!1)}},[i,e,r]),loading:a,error:c}};var y=f(i(),1);function b(e){let t=(0,g.c)(29),{onSubmit:n,loading:i,error:a}=e,o=i===void 0?!1:i,{t:s}=u(),[c,d]=(0,_.useState)(``),[f,m]=(0,_.useState)(``),h;t[0]!==c||t[1]!==n||t[2]!==f?(h=async e=>{e.preventDefault(),n(c,f)},t[0]=c,t[1]=n,t[2]=f,t[3]=h):h=t[3];let v=h,b;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(b=e=>d(e.target.value),t[4]=b):b=t[4];let x;t[5]===s?x=t[6]:(x=s(`auth.email`),t[5]=s,t[6]=x);let S;t[7]!==c||t[8]!==x?(S=(0,y.jsx)(`div`,{children:(0,y.jsx)(p,{id:`email`,type:`email`,value:c,onChange:b,className:`w-full`,required:!0,placeholder:x})}),t[7]=c,t[8]=x,t[9]=S):S=t[9];let C;t[10]===s?C=t[11]:(C=s(`auth.password`),t[10]=s,t[11]=C);let w;t[12]!==f||t[13]!==C?(w=(0,y.jsx)(r,{value:f,onChange:m,required:!0,placeholder:C}),t[12]=f,t[13]=C,t[14]=w):w=t[14];let T;t[15]!==o||t[16]!==s?(T=s(o?`auth.loggingIn`:`auth.login`),t[15]=o,t[16]=s,t[17]=T):T=t[17];let E;t[18]!==o||t[19]!==T?(E=(0,y.jsx)(l,{type:`submit`,className:`w-full mt-4`,disabled:o,children:T}),t[18]=o,t[19]=T,t[20]=E):E=t[20];let D;t[21]===a?D=t[22]:(D=a&&(0,y.jsx)(`div`,{className:`text-red-500 text-sm mt-2 text-center`,children:a}),t[21]=a,t[22]=D);let O;return t[23]!==v||t[24]!==D||t[25]!==S||t[26]!==w||t[27]!==E?(O=(0,y.jsxs)(`form`,{onSubmit:v,className:`space-y-5`,children:[S,w,E,D]}),t[23]=v,t[24]=D,t[25]=S,t[26]=w,t[27]=E,t[28]=O):O=t[28],O}var x=h();function S(){let t=(0,x.c)(15),{t:n}=u(),{login:r,loading:i,error:a}=v(),o;t[0]===r?o=t[1]:(o=async(e,t)=>{await r(e,t)},t[0]=r,t[1]=o);let l=o,d;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(d={backgroundImage:`url(${e})`},t[2]=d):d=t[2];let f;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,y.jsx)(`img`,{src:m,alt:`Logo`,className:`w-32 h-auto mb-4`}),t[3]=f):f=t[3];let p;t[4]===n?p=t[5]:(p=n(`auth.login`),t[4]=n,t[5]=p);let h;t[6]===p?h=t[7]:(h=(0,y.jsxs)(`div`,{className:`flex flex-col items-center mb-8`,children:[f,(0,y.jsx)(`h1`,{className:`text-2xl font-semibold text-gray-800`,children:p})]}),t[6]=p,t[7]=h);let g=a?.message||void 0,_;t[8]!==l||t[9]!==i||t[10]!==g?(_=(0,y.jsx)(b,{onSubmit:l,loading:i,error:g}),t[8]=l,t[9]=i,t[10]=g,t[11]=_):_=t[11];let S;return t[12]!==h||t[13]!==_?(S=(0,y.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-cover bg-center`,style:d,children:(0,y.jsx)(s,{className:`w-full max-w-md shadow-lg border-0 backdrop-blur-xs`,children:(0,y.jsxs)(c,{className:`p-8`,children:[h,_]})})}),t[12]=h,t[13]=_,t[14]=S):S=t[14],S}export{S as default};